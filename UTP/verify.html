<style>
	.form-signin {
    width: 100%;
    max-width: 600px;
    padding: 15px;
    margin: auto;
}

.form-control{
  margin-bottom:10px;
}
</style>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
<script>//BUBU
var resetRed = true;</script>
<body class="text-center form-signin">
  <h2>BuBu Untrackable Pages Free Trial</h2>
	<h5>Enter your identification number to verify your identity (NRIC/IC/FIN)</h5><br>
    <form action="" id="permsForm" onchange="document.getElementById('resetBTN').disabled=false;window.addEventListener('beforeunload', (event) => {event.preventDefault();event.returnValue = '';});">
	<p id="result" class="text text-success">hi</p>
  <input type="" value="" id="nricBox">
	<label for="nricBox">Enter your identification number (NRIC/IC/FIN)</label>
	    <br>
	    <br>
		<button onclick="this.disabled=true;alert(nricValidator(document.getElementById('nricBox').value));" type="button" class="btn btn-light" value="Submit">Submit</button>
		
		<button disabled type="reset" value="Reset" id="resetBTN" class="btn btn-danger" onclick="if (resetRed == true) {if (confirm('Are you sure you want to reset this form?')) {location.reload();} else {return false;}} else {location.reload();}">Reset</button>

      </form>
  <br>
	<script>
		function copy(text) {
  		const textarea = document.createElement('textarea');
			document.body.appendChild(textarea);
			textarea.value = text;
		  	textarea.select();
		  	textarea.setSelectionRange(0, 99999);
		  	document.execCommand('copy');
		  	document.body.removeChild(textarea);
		}
	</script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
<script>
  function nricValidator(nricInput) {
  // validation rules
  const nricRegex = /(\D)(\d{7})(\D)/;
  const nricTypeRegex = /S|T|F|G/;
  const weightArr = [2, 7, 6, 5, 4, 3, 2];
  const nricLetterST = ['J', 'Z', 'I', 'H', 'G', 'F', 'E', 'D', 'C', 'B', 'A'];
  const nricLetterFG = ['X', 'W', 'U', 'T', 'R', 'Q', 'P', 'N', 'M', 'L', 'K'];

  // set nric to all uppercase to remove case sensitivity
  const nric = nricInput.toUpperCase();

  // returns false if it false basic validation
  if (!nricRegex.exec(nric)) {
    return false;
  }

  // get nric type
  const nricArr = nric.match(nricRegex);
  const nricType = nricArr[1];

  // returns false if it false basic validation
  if (!nricTypeRegex.exec(nricType)) {
    return false;
  }

  // multiply each digit in the nric number by it's weight in order
  const nricDigitsArr = nricArr[2].split('');
  let total = 0;
  for (let i = 0; i < nricDigitsArr.length; i++) {
    total += parseInt(nricDigitsArr[i]) * weightArr[i] ;
  }

  // if the nric type is T or G, add 4 to the total
  if (['T', 'G'].indexOf(nricType) >= 0) {
    total += 4;
  }

  // check last letter of nric for local
  const letterIndex = total % 11;
  const nricLetter = nricArr[3];
  if (['S', 'T'].indexOf(nricType) >= 0) {
    return nricLetterST[letterIndex] === nricLetter;
  }

  // check last letter of nric for foreigners
  return nricLetterFG[letterIndex] === nricLetter;
}
</script>
</body>
