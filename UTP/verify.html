<style>
	.form-signin {
    width: 100%;
    max-width: 600px;
    padding: 15px;
    margin: auto;
}

.form-control{
  margin-bottom:10px;
}

button[disabled] {
	cursor: not-allowed;
}
</style>
<!-- <link href="src/fakerecaptcha.css" rel="stylesheet">-->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
<script>//BUBU</script>
<title>BuBu Untrackable Pages Free Trial</title>
<body class="form-signin">
  <h2 class="text-center">BuBu Untrackable Pages Free Trial</h2>
	<h5 class="text-center">Enter your identification number to&nbsp;verify your identity (NRIC/IC/FIN)</h5><br>
    <form action="#" class="text-center" id="permsForm">
	<label class="text-center" for="nricBox">Identification Number</label><br>
  <input class="text-center" type="" value="" style="text-transform: uppercase;" id="nricBox">
	    <small class="text-center"><br>Input for verification purposes only. Your data will not be collected or stored.</small>
	    	<p id="resultX" class="text text-center text-danger">&nbsp;</p>
	    <br><div class="text-center">
		<button onclick="this.disabled=true;if (document.getElementById('nricBox').value == 'get') {document.getElementById('nricBox').value = localStorage.getItem('nric');this.disabled=false;} else {if (document.getElementById('nricBox').value == 'skip') {document.getElementById('resultX').classList.remove('text-danger');document.getElementById('resultX').classList.add('text-success');document.getElementById('resultX').innerHTML='{CMD_PHRASE_RECOGNIZED}: SKIP; EXECUTING ACTION...'; setTimeout(function() {location.href = 'waterdown_install.html';}, 1000);} else {if (nricValidator(document.getElementById('nricBox').value)) {document.getElementById('resultX').classList.remove('text-danger');document.getElementById('resultX').classList.add('text-success');document.getElementById('resultX').innerHTML='Verification successful!'; localStorage.setItem('nric', document.getElementById('nricBox').value); location.href = 'waterdown_install.html';} else {document.getElementById('resultX').classList.remove('text-success');document.getElementById('resultX').classList.add('text-danger');document.getElementById('resultX').innerHTML='That identification number does not exist.';this.disabled=false;}}}" type="submit" class="btn text-center btn-light" value="Submit">Submit</button>
	    </div> <br>
    </form>
	    <div class="fkrc-container fkrc-m-p">
        <!-- captcha widget -->
<!--         <div id="fkrc-checkbox-window" class="fkrc-checkbox-window fkrc-m-p fkrc-block text-center">
            <div class="fkrc-checkbox-container fkrc-m-p">
                <button type="button" id="fkrc-checkbox" class="fkrc-checkbox fkrc-m-p fkrc-line-normal" onclick="if (document.getElementById('nricBox').value == nil) {document.getElementById('resultX').classList.remove('text-success');document.getElementById('resultX').classList.add('text-danger');document.getElementById('resultX').innerHTML='Please verify your identity first.';} else {setTimeout(verifyCaptcha, 4189);}"></button>
            </div>
            <p class="fkrc-im-not-a-robot fkrc-m-p fkrc-line-normal">I'm not a robot</p>
            <img src="images/captcha_logo.svg" class="fkrc-captcha-logo fkrc-line-normal" alt="">
            <p class="fkrc-checkbox-desc fkrc-m-p fkrc-line-normal">reCAPTCHA</p>
            <p class="fkrc-checkbox-desc fkrc-m-p fkrc-line-normal">Privacy - Terms</p>
            <img src="images/captcha_spinner.gif" class="fkrc-spinner fkrc-m-p fkrc-line-normal" alt="" id="fkrc-spinner">
        </div> -->
        <!-- Captcha checkbox verification window -->
<!--          <div id="fkrc-verifywin-window" class="fkrc-verifywin-window" style="display:none;">
            <div class="fkrc-verifywin-container">
                <header class="fkrc-verifywin-header">
                    <span class="fkrc-verifywin-header-text-medium fkrc-m-p fkrc-block">BuBu Untrackable Pages wants to verify you're a human.</span>
                     <span class="fkrc-verifywin-header-text-big fkrc-m-p fkrc-block">traffic lights</span>
                    <span class="fkrc-verifywin-header-text-medium fkrc-m-p fkrc-block">Click verify to continue...</span>
                </header>
                <main class="fkrc-verifywin-main">
                    BuBu Untrackable Pages has verified your identity. You may continue the installation.<br>
                </main>
            </div>
            <footer class="fkrc-verifywin-container fkrc-verifywin-footer">
                <div class="fkrc-verifywin-footer-left">
                    Press the verify button to proceed.
                </div>
                <button type="button" class="fkrc-verifywin-verify-button fkrc-block" id="fkrc-verifywin-verify-button">Verify</button>
            </footer>
        </div>
        <img src="images/captcha_arrow.svg" alt="" class="fkrc-verifywin-window-arrow" id="fkrc-verifywin-window-arrow"/>
    </div> -->
    <!-- captcha end -->
<!-- 	<p id="resultY" class="text text-center text-danger"></p>
 -->
<!--         <script src="src/fakerecaptcha.js"></script>
	    <br> -->
	    
	<script>
		function copy(text) {
  		const textarea = document.createElement('textarea');
			document.body.appendChild(textarea);
			textarea.value = text;
		  	textarea.select();
		  	textarea.setSelectionRange(0, 99999);
		  	document.execCommand('copy');
		  	document.body.removeChild(textarea);
		}
	</script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
<script>
  function nricValidator(nricInput) {
  const nricRegex = /(\D)(\d{7})(\D)/;
  const nricTypeRegex = /S|T|F|G/;
  const weightArr = [2, 7, 6, 5, 4, 3, 2];
  const nricLetterST = ['J', 'Z', 'I', 'H', 'G', 'F', 'E', 'D', 'C', 'B', 'A'];
  const nricLetterFG = ['X', 'W', 'U', 'T', 'R', 'Q', 'P', 'N', 'M', 'L', 'K'];
  const nric = nricInput.toUpperCase();

  if (!nricRegex.exec(nric)) {
    return false; // basic validation (X1234567X)
  }

  const nricArr = nric.match(nricRegex);
  const nricType = nricArr[1];

  if (!nricTypeRegex.exec(nricType)) {
    return false; // does not contain supported last letter
  }

  // multiply each digit in the nric number by its weight in order
  const nricDigitsArr = nricArr[2].split('');
  let total = 0;
  for (let i = 0; i < nricDigitsArr.length; i++) {
    total += parseInt(nricDigitsArr[i]) * weightArr[i] ;
  }

  if (['T', 'G'].indexOf(nricType) >= 0) {
    total += 4;
  }

  // check last letter
  const letterIndex = total % 11;
  const nricLetter = nricArr[3];
  if (['S', 'T'].indexOf(nricType) >= 0) {
    return nricLetterST[letterIndex] === nricLetter;
  }

  // check last letter for F
  return nricLetterFG[letterIndex] === nricLetter;
}
</script>
</body>
